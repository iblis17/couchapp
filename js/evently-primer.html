<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Evently Primer &mdash; CouchApp 1.0.1 documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="CouchApp 1.0.1 documentation" href="../index.html" />
    <link rel="up" title="JavaScript Application Programming" href="index.html" />
    <link rel="next" title="The Garden" href="../user/garden.html" />
    <link rel="prev" title="Using backbone.js with CouchApp" href="backbone.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="evently-primer">
<span id="id1"></span><h1>Evently Primer<a class="headerlink" href="#evently-primer" title="Permalink to this headline">¶</a></h1>
<div class="section" id="the-basic-model">
<h2>The Basic Model<a class="headerlink" href="#the-basic-model" title="Permalink to this headline">¶</a></h2>
<p>If you&#8217;ve ever built event-based applications with jQuery,
you should feel right at home with Evently.
All it is, is a shortcut for writing jQuery,
and was extracted from applications I&#8217;ve been writing over the last few months.</p>
<p>In jQuery development, it is common to <a class="reference external" href="http://yehudakatz.com/2009/04/20/evented-programming-with-jquery/">intermix custom and standard
events</a>,
so for instance, you may have a DOM element with a <code class="docutils literal"><span class="pre">click</span></code> handler,
a <code class="docutils literal"><span class="pre">hover</span></code> handler and a <code class="docutils literal"><span class="pre">loggedIn</span></code> handler.
We are assuming you&#8217;re familiar with the first two,
and probably familiar with custom events like the last one as well.</p>
</div>
<div class="section" id="custom-events-primer">
<h2>Custom Events Primer<a class="headerlink" href="#custom-events-primer" title="Permalink to this headline">¶</a></h2>
<p>In a normal jQuery application, you&#8217;d apply these like this:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#myelement&quot;</span><span class="p">).</span><span class="nx">bind</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;You clicked me.&quot;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#myelement&quot;</span><span class="p">).</span><span class="nx">bind</span><span class="p">(</span><span class="s2">&quot;mouseenter&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;You moused over me.&quot;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#myelement&quot;</span><span class="p">).</span><span class="nx">bind</span><span class="p">(</span><span class="s2">&quot;loggedIn&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;You are logged in.&quot;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Of course, custom events need to be triggered,
as the browser has no built-in event by that name,
so <code class="docutils literal"><span class="pre">loggedIn</span></code> won&#8217;t happen until you trigger it from code somewhere.
Like this:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#logIn&quot;</span><span class="p">).</span><span class="nx">bind</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#myelement&quot;</span><span class="p">).</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;loggedIn&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;Dr. Pepper&quot;</span><span class="p">]);</span>
<span class="p">})</span>
</pre></div>
</div>
<p>Hopefully none of what we&#8217;ve written so far is surprising.
If you learned a few new tricks about jQuery, you can thank us later.
If you already knew all that, keep reading, as the good stuff is about to start.</p>
</div>
<div class="section" id="back-to-evently">
<h2>Back to Evently<a class="headerlink" href="#back-to-evently" title="Permalink to this headline">¶</a></h2>
<p>As we mentioned at the top of the article,
Evently is just shortcuts for writing code like the above.
Here is the above widget defined in Evently:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#another&quot;</span><span class="p">).</span><span class="nx">evently</span><span class="p">({</span>
    <span class="nx">click</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;You clicked me.&quot;</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">mouseenter</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;You moused me.&quot;</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">loggedIn</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;You are logged in, &quot;</span> <span class="o">+</span> <span class="nx">name</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
<p>You can see that it is just the same as the original code sample,
except that instead of individual calls to <code class="docutils literal"><span class="pre">.bind</span></code>,
there is a JavaScript object structure that specifies the event names.</p>
<p>Just like the above example, custom events need to be triggered by code.
Let&#8217;s setup an element to trigger the <code class="docutils literal"><span class="pre">loggedIn</span></code> event of the Evently widget:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#anotherLogIn&quot;</span><span class="p">).</span><span class="nx">evently</span><span class="p">({</span>
    <span class="nx">click</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#another&quot;</span><span class="p">).</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;loggedIn&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;Mr. Pibb&quot;</span><span class="p">]);</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
<p>If all you take away from this document is that
Evently is just a shortcut for wiring up jQuery widgets,
you can consider yourself a success.
However, there are four more things to learn.
(I know, that&#8217;s a lot, but it&#8217;s a powerful library.)
When you&#8217;ve learned the four things, you will become a true ninja.</p>
</div>
<div class="section" id="four-more-things-to-learn">
<h2>Four More Things to Learn<a class="headerlink" href="#four-more-things-to-learn" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Evently has a built-in way to handle Ajax calls and <a class="reference external" href="https://github.com/janl/mustache.js">Mustache</a> templating.</li>
<li>Evently widgets can contain other Evently widgets,
nested like matryoshka dolls. This turns out to be hella useful.</li>
<li>Evently has some magic events,
including a handler for realtime updates from <a class="reference external" href="http://couchdb.apache.org">CouchDB</a>.</li>
<li>Evently code can be represented as a deeply-nested filesystem tree,
when you use the <a class="reference external" href="https://github.com/couchapp/couchapp">couchapp</a> to deploy it.</li>
</ul>
<div class="section" id="mustache-templating">
<h3>Mustache Templating<a class="headerlink" href="#mustache-templating" title="Permalink to this headline">¶</a></h3>
<p>So far, we have only looked at Evently events
that have a plain old function as their value.
Evently has a built-in method of rendering <a class="reference external" href="https://github.com/janl/mustache.js">Mustache</a> templates.
When you use these structured event definitions,
Evently takes care of a lot of the boilerplate so you can just concentrate on your application.</p>
<p>Here is a basic Evently widget using <a class="reference external" href="https://github.com/janl/mustache.js">Mustache</a>:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#basicMustache&quot;</span><span class="p">).</span><span class="nx">evently</span><span class="p">({</span>
    <span class="nx">click</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">mustache</span><span class="o">:</span> <span class="s1">&#39;&lt;h4&gt;Thanks for clicking me, {{name}}&lt;/h4&gt;&#39;</span><span class="p">,</span>
        <span class="nx">data</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">prompt</span><span class="p">(</span><span class="s2">&quot;Enter your name&quot;</span><span class="p">);</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="nx">name</span><span class="o">:</span> <span class="p">(</span><span class="nx">name</span> <span class="o">||</span> <span class="s2">&quot;Anonymous&quot;</span><span class="p">)</span>
            <span class="p">};</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
<p>The two key elements here are <code class="docutils literal"><span class="pre">mustache</span></code> (the HTML template) and <code class="docutils literal"><span class="pre">data</span></code>,
which is a function which feeds the values into the Mustache template.
For more information about Mustache templates,
see <code class="docutils literal"><span class="pre">the</span> <span class="pre">Mustache</span> <span class="pre">documentations</span> <span class="pre">&lt;http://mustache.github.com/&gt;</span></code>.</p>
</div>
<div class="section" id="ajax-requests-with-mustache-templates">
<h3>Ajax Requests with Mustache Templates<a class="headerlink" href="#ajax-requests-with-mustache-templates" title="Permalink to this headline">¶</a></h3>
<p>Probably the most useful thing in the world you can do in an Ajax app is,
<em>load data from the server and render it</em>.
This is usually an asynchronous operation.
We&#8217;ll assume you are comfortable with the fundamentals of Ajax requests.</p>
<p>Here is an Evently widget like the previous one, that loads data
from the server using jQuery, before passing it to the Mustache template.
Instead of an jQuery ajax call, you could use any other method of loading data.
Later we&#8217;ll see some examples that use a CouchDB library to load the data.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#ajaxMustache&quot;</span><span class="p">).</span><span class="nx">evently</span><span class="p">({</span>
    <span class="nx">mouseenter</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">async</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
                <span class="nx">url</span><span class="o">:</span> <span class="s2">&quot;http://twitter.com/status/user_timeline/jchris.json?count=1&amp;callback=?&quot;</span><span class="p">,</span>
                <span class="nx">dataType</span><span class="o">:</span> <span class="s2">&quot;jsonp&quot;</span><span class="p">,</span>
                <span class="nx">success</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">tweets</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">callback</span><span class="p">(</span><span class="nx">tweets</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
                <span class="p">}</span>
            <span class="p">});</span>
        <span class="p">},</span>
        <span class="nx">mustache</span><span class="o">:</span> <span class="s1">&#39;&lt;h4&gt;Latest tweet from: {{name}}&lt;/h4&gt;&lt;img src=&quot;{{image_src}}&quot;/&gt;&lt;p&gt;{{text}}&lt;/p&gt;&#39;</span><span class="p">,</span>
        <span class="nx">data</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">tweet</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="nx">text</span><span class="o">:</span> <span class="nx">tweet</span><span class="p">.</span><span class="nx">text</span><span class="p">,</span>
                <span class="nx">name</span><span class="o">:</span> <span class="nx">tweet</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span>
                <span class="nx">image_src</span><span class="o">:</span> <span class="nx">tweet</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">profile_image_url</span>
            <span class="p">};</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
<p>What&#8217;s new in this code? The <code class="docutils literal"><span class="pre">async</span></code> function is the main star,
which in this case makes an Ajax request (but it can do anything it wants).
Another important thing to note is that the first argument
to the async function is a <code class="docutils literal"><span class="pre">callback</span></code> which you use to tell Evently
when you are done with your asynchronous action.
In this case it is called with the first tweet in the list from Twitter.
Whatever you pass to the callback function
then becomes the first item passed to the <code class="docutils literal"><span class="pre">data</span></code> function.</p>
</div>
<div class="section" id="nested-evently-widgets-with-selectors">
<h3>Nested Evently Widgets with <code class="docutils literal"><span class="pre">selectors</span></code><a class="headerlink" href="#nested-evently-widgets-with-selectors" title="Permalink to this headline">¶</a></h3>
<p>So far, we&#8217;ve seen how you can use Evently to do regular jQuery events,
and how you can feed special event definitions to Evently,
that render Mustache templates and make asynchronous requests.
Now let&#8217;s get recursive!</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#nestedEvently&quot;</span><span class="p">).</span><span class="nx">evently</span><span class="p">({</span>
    <span class="nx">click</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">mustache</span><span class="o">:</span> <span class="s1">&#39;&lt;p&gt;Click or hover the word to change it: &#39;</span>
                   <span class="o">+</span> <span class="s1">&#39;&lt;span class=&quot;word&quot;&gt;{{word}}&lt;/span&gt;&lt;/p&gt;&#39;</span>
                   <span class="o">+</span> <span class="s1">&#39;&lt;p&gt;&lt;a href=&quot;#win&quot;&gt;Click here to win the lottery!&lt;/a&gt;&lt;/p&gt;&#39;</span><span class="p">,</span>
        <span class="nx">data</span><span class="o">:</span> <span class="p">{</span><span class="nx">word</span><span class="o">:</span><span class="s2">&quot;melon&quot;</span><span class="p">},</span>
        <span class="nx">selectors</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;span.word&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="nx">click</span><span class="o">:</span> <span class="p">{</span>
                    <span class="nx">mustache</span><span class="o">:</span> <span class="s1">&#39;&lt;strong&gt;watermelon&lt;/strong&gt;&#39;</span>
                <span class="p">},</span>
                <span class="nx">mouseenter</span><span class="o">:</span> <span class="p">{</span>
                    <span class="nx">mustache</span><span class="o">:</span> <span class="s1">&#39;&lt;em&gt;cantaloupe&lt;/em&gt;&#39;</span>
                <span class="p">},</span>
                <span class="nx">congrats</span><span class="o">:</span> <span class="p">{</span>
                    <span class="nx">mustache</span><span class="o">:</span> <span class="s2">&quot;&lt;strong&gt;{{you}} won the lottery!&lt;/strong&gt;&quot;</span><span class="p">,</span>
                    <span class="nx">data</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                        <span class="k">return</span> <span class="p">{</span>
                            <span class="nx">you</span> <span class="o">:</span> <span class="nx">prompt</span><span class="p">(</span><span class="s2">&quot;enter your name for a chance to win&quot;</span><span class="p">)</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">},</span>
            <span class="s1">&#39;a[href=#win]&#39;</span><span class="o">:</span> <span class="p">{</span>
                <span class="nx">click</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;span.word&quot;</span><span class="p">).</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;congrats&quot;</span><span class="p">);</span>
                    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">selectors</span></code> key points to a set of jQuery selectors,
which are used to find elements and add more evently widgets to them.
In this case the original Mustache template is just this HTML</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;p&gt;</span>
    Click or hover the word to change it:
        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;word&quot;</span><span class="nt">&gt;</span>{{word}}<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;#win&quot;</span><span class="nt">&gt;</span>Click here to win the lottery!<span class="nt">&lt;/a&gt;&lt;/p&gt;</span>
</pre></div>
</div>
<p>Hovering over the <code class="docutils literal"><span class="pre">span</span></code> with class <code class="docutils literal"><span class="pre">word</span></code> will change the word,
as will clicking it.
Clicking the link with <code class="docutils literal"><span class="pre">href=#win</span></code> will trigger the <code class="docutils literal"><span class="pre">congrats</span></code>
custom event on the <code class="docutils literal"><span class="pre">span</span></code>.</p>
<p>What&#8217;s neat about this is that you can draw a widget
that requires subqueries or loading data
from disparate sources on different events,
and avoid having to do all the loading work up front.
So the initial content is displayed immediately
and progressively enhanced with the results of running more code.</p>
<p>You can do anything inside a selector that you can do in a top-level Evently section.</p>
</div>
<div class="section" id="a-little-bit-of-magic">
<h3>A Little Bit of Magic<a class="headerlink" href="#a-little-bit-of-magic" title="Permalink to this headline">¶</a></h3>
<p>Evently has two magic event names: <code class="docutils literal"><span class="pre">_init</span></code> and <code class="docutils literal"><span class="pre">_changes</span></code>.
The <code class="docutils literal"><span class="pre">_init</span></code> event runs whenever the Evently widget is initialized.
Here&#8217;s a simple example:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#initWidget&quot;</span><span class="p">).</span><span class="nx">evently</span><span class="p">({</span>
    <span class="nx">_init</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">widget</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
        <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
            <span class="nx">url</span><span class="o">:</span> <span class="s2">&quot;/_session&quot;</span><span class="p">,</span>
            <span class="nx">dataType</span><span class="o">:</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
            <span class="nx">success</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">resp</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">resp</span><span class="p">.</span><span class="nx">userCtx</span> <span class="o">&amp;&amp;</span> <span class="nx">resp</span><span class="p">.</span><span class="nx">userCtx</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">widget</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;loggedIn&quot;</span><span class="p">,</span> <span class="p">[</span><span class="nx">resp</span><span class="p">.</span><span class="nx">userCtx</span><span class="p">]);</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">widget</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;loggedOut&quot;</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">},</span>
    <span class="nx">loggedIn</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">data</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">user</span><span class="p">;</span>
        <span class="p">},</span>
        <span class="nx">mustache</span><span class="o">:</span> <span class="s1">&#39;&lt;p&gt;Hello {{name}}&lt;/p&gt;&#39;</span>
    <span class="p">},</span>
    <span class="nx">loggedOut</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">mustache</span><span class="o">:</span> <span class="s1">&#39;&lt;p&gt;You are logged out&lt;/p&gt;&#39;</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
<p>You can see in this example that <code class="docutils literal"><span class="pre">_init</span></code> is run,
and it decides whether to trigger the <code class="docutils literal"><span class="pre">loggedIn</span></code> or <code class="docutils literal"><span class="pre">loggedOut</span></code> events
based on the result of an Ajax call.</p>
<p>The <code class="docutils literal"><span class="pre">_changes</span></code> event name is CouchDB specific, at the moment.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Evently Primer</a><ul>
<li><a class="reference internal" href="#the-basic-model">The Basic Model</a></li>
<li><a class="reference internal" href="#custom-events-primer">Custom Events Primer</a></li>
<li><a class="reference internal" href="#back-to-evently">Back to Evently</a></li>
<li><a class="reference internal" href="#four-more-things-to-learn">Four More Things to Learn</a><ul>
<li><a class="reference internal" href="#mustache-templating">Mustache Templating</a></li>
<li><a class="reference internal" href="#ajax-requests-with-mustache-templates">Ajax Requests with Mustache Templates</a></li>
<li><a class="reference internal" href="#nested-evently-widgets-with-selectors">Nested Evently Widgets with <code class="docutils literal"><span class="pre">selectors</span></code></a></li>
<li><a class="reference internal" href="#a-little-bit-of-magic">A Little Bit of Magic</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">JavaScript Application Programming</a><ul>
      <li>Previous: <a href="backbone.html" title="previous chapter">Using backbone.js with CouchApp</a></li>
      <li>Next: <a href="../user/garden.html" title="next chapter">The Garden</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/js/evently-primer.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, Benoit Chesneau.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.6</a>
      
      |
      <a href="../_sources/js/evently-primer.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>